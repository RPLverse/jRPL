# jRPL
An RPL to bytecode compiler.

*jRPL* compiles a small subset of RPL (Reverse Polish Lisp, the language used on classic HP programmable calculators) to Java bytecode, built using [ASM](https://asm.ow2.io/) framework.

The project was created as an exercise for the *Software Development Methods* exam (MSc in Computer Engineering) and keeps a simple, extensible architecture.

### Prerequisites
- JDK (recommended 17+)
- Gradle Wrapper

### Build
Pipeline to compile examples/demo.rpl into a runnable class:
```bash
./gradlew clean build -x test
./gradlew test --warning-mode all
./gradlew :run --args="examples/demo.rpl --out-dir build/gen-classes --class-name org.jrpl.gen.Demo"
./gradlew javadoc

```

### Run
The generated class depends on the runtime (org.jrpl.runtime.ExecStack), so both the generated classes and the project’s runtime classes on the classpath have to be included

Linux
```bash
java -cp build/gen-classes:build/classes/java/main org.jrpl.gen.Demo

```

Windows
```bash
java -cp build\gen-classes;build\classes\java\main org.jrpl.gen.Demo

```

### What the compiler generates
The resulting class exposes:

- public static void run(org.jrpl.runtime.ExecStack)
- public static void main(String[]) (generated by default, unless option --no-main is used)

main(String[]) parses CLI arguments as double, pushes them on the stack, runs the program and prints the top of the stack.

Without passing --class-name, an auto name like org.jrpl.gen.demo_ab12cd is used (with a base-36 timestamp), passing --class-name org.jrpl.gen.Demo, that class will be generated.

### Supported syntax
- Numbers: positive literals only (e.g., 3, 2.5), but negative values are produced via operations (e.g., 0 5 - becomes -5)
- Arithmetic: + - * / ^
- Comparisons: < > <= >= == !=
  (booleans represented as 0.0 / 1.0)
- Stack operations: DROP DUP SWAP
- Control flow: IF THEN … ELSE … END

### Examples (under examples/)
```rpl
; demo1.rpl
; Given a, b from the command line, if b > 0 then computes a ^ b, else pushes 1
<<
  DUP 0 >
  IF THEN
    ^
  ELSE
    DROP DROP 1
  END
>>

```
```rpl
; demo2.rpl
; Given a, b from the command line, computes sqrt(a ^ 2 + b ^ 2)
<<
  DUP *
  SWAP DUP *
  +
  0.5 ^
>>

```
